<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€€ä¼‘ç¦éŸ³ - ç®¡ç†å¾Œå°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <nav class="bg-gradient-to-r from-red-500 to-red-600 text-white p-4 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">ğŸŒ… é€€ä¼‘ç¦éŸ³ç®¡ç†å¾Œå°</h1>
            <div class="text-sm">
                <span id="currentTime"></span>
            </div>
        </div>
    </nav>

    <div class="container mx-auto p-6">
        <!-- çµ±è¨ˆå¡ç‰‡ -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">ç¸½ç”¨æˆ¶æ•¸</p>
                        <p class="text-3xl font-bold text-gray-800" id="userCount">-</p>
                    </div>
                    <div class="text-4xl">ğŸ‘¥</div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">æ´»å‹•æ•¸é‡</p>
                        <p class="text-3xl font-bold text-gray-800" id="activityCount">-</p>
                    </div>
                    <div class="text-4xl">ğŸ¯</div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-yellow-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">AIè¡Œç¨‹æ•¸</p>
                        <p class="text-3xl font-bold text-gray-800" id="tourCount">-</p>
                    </div>
                    <div class="text-4xl">ğŸŒ</div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">ä¼ºæœå™¨ç‹€æ…‹</p>
                        <p class="text-xl font-bold text-green-500" id="serverStatus">é‹ä½œä¸­</p>
                    </div>
                    <div class="text-4xl">âœ…</div>
                </div>
            </div>
        </div>

        <!-- å¿«é€Ÿæ“ä½œ -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">âš¡ å¿«é€Ÿæ“ä½œ</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <button onclick="refreshStats()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg transition">
                    ğŸ”„ é‡æ–°æ•´ç†çµ±è¨ˆ
                </button>
                <button onclick="syncDatabase()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-lg transition">
                    ğŸ—„ï¸ åŒæ­¥è³‡æ–™åº«
                </button>
                <button onclick="seedData()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-3 rounded-lg transition">
                    ğŸ“¦ åŒ¯å…¥ç¨®å­è³‡æ–™
                </button>
                <a href="/" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-3 rounded-lg transition text-center">
                    ğŸ  è¿”å›é¦–é 
                </a>
            </div>
        </div>

        <!-- åŠŸèƒ½åˆ—è¡¨ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ“‹ ä¸»è¦åŠŸèƒ½</h2>
                <ul class="space-y-3">
                    <li class="flex items-center text-gray-600">
                        <span class="text-green-500 mr-2">âœ…</span> AI è¡Œç¨‹è¦åŠƒï¼ˆChatGPT + Geminiï¼‰
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="text-green-500 mr-2">âœ…</span> å®Œæ•´å¤©æ°£æœå‹™ï¼ˆ200+ åŸå¸‚ï¼‰
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="text-green-500 mr-2">âœ…</span> å¥åº·æé†’ï¼ˆå›è¨º/ç”¨è—¥ï¼‰
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="text-green-500 mr-2">âœ…</span> æƒ³å»æ¸…å–®æ”¶è—
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="text-green-500 mr-2">âœ…</span> å€‹äººè¨­å®šç®¡ç†
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="text-green-500 mr-2">âœ…</span> æ—©å®‰æ¨æ’­æ’ç¨‹
                    </li>
                </ul>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ”— å¿«é€Ÿé€£çµ</h2>
                <div class="space-y-3">
                    <a href="https://line.me/R/ti/p/@024wclps" target="_blank" class="block bg-green-100 hover:bg-green-200 text-green-800 px-4 py-3 rounded-lg transition">
                        ğŸ’¬ LINE Bot (@024wclps)
                    </a>
                    <a href="/api/stats" target="_blank" class="block bg-blue-100 hover:bg-blue-200 text-blue-800 px-4 py-3 rounded-lg transition">
                        ğŸ“Š API çµ±è¨ˆè³‡æ–™
                    </a>
                    <a href="/api/activities" target="_blank" class="block bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-4 py-3 rounded-lg transition">
                        ğŸ¯ æ´»å‹•åˆ—è¡¨ API
                    </a>
                    <a href="/api/health" target="_blank" class="block bg-purple-100 hover:bg-purple-200 text-purple-800 px-4 py-3 rounded-lg transition">
                        â¤ï¸ å¥åº·æª¢æŸ¥ API
                    </a>
                </div>
            </div>
        </div>

        <!-- æ“ä½œæ—¥èªŒ -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ“œ æ“ä½œæ—¥èªŒ</h2>
            <div id="logContainer" class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm h-48 overflow-y-auto">
                <div>[ç³»çµ±] ç®¡ç†å¾Œå°å·²è¼‰å…¥</div>
            </div>
        </div>
    </div>

    <footer class="bg-gray-800 text-white text-center p-4 mt-8">
        <p>ğŸŒ… é€€ä¼‘ç¦éŸ³ Â© 2025 | Powered by LINE Bot + AI</p>
    </footer>

    <script>
        function updateTime() {
            document.getElementById('currentTime').textContent = new Date().toLocaleString('zh-TW');
        }
        setInterval(updateTime, 1000);
        updateTime();

        function addLog(msg) {
            var container = document.getElementById('logContainer');
            var div = document.createElement('div');
            div.textContent = '[' + new Date().toLocaleTimeString('zh-TW') + '] ' + msg;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        async function refreshStats() {
            addLog('æ­£åœ¨å–å¾—çµ±è¨ˆè³‡æ–™...');
            try {
                var res = await fetch('/api/stats');
                var data = await res.json();
                document.getElementById('userCount').textContent = data.users || 0;
                document.getElementById('activityCount').textContent = data.activities || 0;
                document.getElementById('tourCount').textContent = data.tours || 0;
                addLog('çµ±è¨ˆè³‡æ–™å·²æ›´æ–°');
            } catch (e) {
                addLog('éŒ¯èª¤ï¼š' + e.message);
            }
        }

        async function syncDatabase() {
            addLog('æ­£åœ¨åŒæ­¥è³‡æ–™åº«...');
            try {
                var res = await fetch('/api/fix-db');
                var data = await res.json();
                addLog(data.message || 'åŒæ­¥å®Œæˆ');
                refreshStats();
            } catch (e) {
                addLog('éŒ¯èª¤ï¼š' + e.message);
            }
        }

        async function seedData() {
            if (!confirm('ç¢ºå®šè¦é‡æ–°åŒ¯å…¥ç¨®å­è³‡æ–™ï¼Ÿ')) return;
            addLog('æ­£åœ¨åŒ¯å…¥ç¨®å­è³‡æ–™...');
            try {
                var res = await fetch('/api/seed?force=true');
                var data = await res.json();
                addLog(data.message || 'åŒ¯å…¥å®Œæˆ');
                refreshStats();
            } catch (e) {
                addLog('éŒ¯èª¤ï¼š' + e.message);
            }
        }

        // è¼‰å…¥æ™‚å–å¾—çµ±è¨ˆ
        refreshStats();
    </script>
</body>
</html>